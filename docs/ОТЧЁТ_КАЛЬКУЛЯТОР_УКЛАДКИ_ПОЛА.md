# Исследование: Калькулятор укладки напольных покрытий с расходом материалов и расчётом стоимости

**Дата:** 2025-01-29  
**Запрос:** Калькулятор укладки напольных покрытий с расходом материалов и расчётом стоимости — как реализовать в проекте floor-haven.

---

## 1. Документация

- **MeasureSquare Calculator Help & API** — https://calculator.measuresquare.com/help  
  Документация по веб-калькулятору напольных покрытий: типы (Carpet, Tile, Hardwood, Laminate, Vinyl), параметры (measureSystem, imageWidth, modelScript), расчёт площади, расхода с учётом отходов (Usage, TileCount). API возвращает JSON с площадью комнаты, количеством материала и при необходимости изображениями раскладки.

- **Integrate Flooring Calculator to Your Web Site** — https://calculator.measuresquare.com/flooring/integration  
  Инструкция по встраиванию калькулятора в сайт: HTML/JavaScript (jQuery), настройка системы мер, типа продукта, отходов; callback с данными расчёта и base64-изображениями. Требуется API key (api@measuresquare.com).

- **MeasureSquare API Integrations** — https://measuresquare.com/api-integrations/  
  Обзор API для интеграции калькуляторов в рабочие процессы и сайты.

---

## 2. Репозитории (10)

| № | Название | URL | Язык/стек | Краткое описание |
|---|----------|-----|-----------|------------------|
| 1 | materials-calculator | https://github.com/AnthonyJRay/materials-calculator | JavaScript, Webpack, SASS | Калькулятор площади пола и необходимых материалов для укладки. |
| 2 | laminate-flooring-estimates | https://github.com/aksinghal86/laminate-flooring-estimates | — | Расчёт сметы по ламинату, веб-инструмент на ankursinghal.me (в т.ч. формальдегид-ламинат). |
| 3 | FloorPlanner-Free-Version | https://github.com/FloorPlanner-Free-Version/FloorPlanner-Free-Version | — | Планировщик этажей 2D/3D: стены, двери, окна, мебель; метрика/имперские; экспорт в изображения/PDF. |
| 4 | youTile | https://github.com/akulll/youTile | HTML/JavaScript | Раскладка прямоугольных элементов (плитка, доски) на листах, оптимизация раскроя. |
| 5 | floorboards | https://github.com/cdot/floorboards | MIT | Расчёт оптимальной раскладки досок (например, ламинат). |
| 6 | square-footage-calculator | https://github.com/pub-calculator-io/square-footage-calculator | WordPress, PHP/JS | Плагин: площадь различных форм, строительные расчёты; можно использовать как калькулятор площади комнаты. |
| 7 | PrecisionEstimator | https://github.com/giampi-ai/PrecisionEstimator | Python, GUI | Смета для подрядчиков: экспорт PDF/CSV, настраиваемые цены. |
| 8 | construction-estimator | https://github.com/watchar-bossla/construction-estimator | — | Платформа смет с использованием ИИ. |
| 9 | ashs_construction_calculator | https://github.com/ashpursglove/ashs_construction_calculator | — | Калькулятор для инженеров, альтернатива таблицам и облачным подпискам. |
| 10 | Veggie-Smart (FlooringCalculator) | https://github.com/SouravHere/Veggie-Smart | HTML/JS | Калькулятор напольных покрытий: Tile/Wood/Carpet, метры/футы, процент отходов, цена за м², 3D-визуализация комнаты. Демо: https://souravhere.github.io/Veggie-Smart/HomeImprovementCals/FlooringCalculator.html |

---

## 3. Статьи в блогах (10)

| № | Название | URL | Автор/ресурс | Краткое описание |
|---|----------|-----|--------------|------------------|
| 1 | Best Waste % for Flooring by Room Type | https://www.handycalcs.com/blog/best-waste-percentage-flooring | HandyCalcs | Рекомендуемый процент отходов по типу комнаты (спальня 7–10%, кухня 10–15%, ванная 15%, лестницы 15–20%, ёлочка/диагональ 15–20%). |
| 2 | Как рассчитать количество ламината для комнаты и квартиры | https://megapoliya.ru/kak-rasschitat-kolichestvo-laminata-dlya-komnaty-i-kvartiry.html | Megapoliya | Площадь комнаты, учёт конфигурации, способа укладки и размеров ламелей; запас одной партией. |
| 3 | Как правильно рассчитать ламинат на комнату | https://lindvor.ru/poleznoe/kak-pravilno-rasschitat-laminat-na-komnatu | Lindvor | Формула по площади, отходы: прямой 5–7%, диагональ, ёлочка до 35%; покупка пачками, одна партия. |
| 4 | How to Build a Basic Form Calculator in React.js | https://www.pluralsight.com/resources/blog/guides/how-to-build-a-basic-form-calculator-in-reactjs | Pluralsight | Построение формы-калькулятора в React: состояние, обработка ввода, вывод результата. |
| 5 | ReactJS \| Simple React Calculator | https://dev.to/moses619/reactjs-simple-react-calculator-1b20 | Dev.to (Moses619) | Простой калькулятор на React: useState, отображение, операторы, сброс. |
| 6 | How to Build a React Calculator from Scratch | https://madza.dev/blog/how-to-build-a-react-calculator-from-scratch | Madza.dev | Калькулятор на React с нуля: структура, логика, форматирование вывода. |
| 7 | Room Dimension and Area Calculation Using Python OpenCV | https://medium.com/@keerthivasanm20/room-dimension-and-area-calculation-using-python-opencv-e375474eaf2c | Medium | Расчёт размеров и площади комнаты по изображению (OpenCV), для продвинутых сценариев. |
| 8 | Powerful Floor Plan Area Calculator | https://www.roomsketcher.com/blog/floor-plan-area-calculator/ | RoomSketcher | Калькулятор площади по плану этажа, советы по замерам. |
| 9 | How to build a JavaScript calculator | https://openjavascript.info/2021/10/18/how-to-build-a-javascript-calculator | OpenJavaScript | HTML/CSS/JS калькулятор: разметка, стили, логика. |
| 10 | Material Takeoff Basics: The Factor of Waste | https://prebuiltml.com/blog/2024/06/17/material-takeoff-basics-the-factor-of-waste/ | PrebuiltML | Основы расчёта материалов и учёта фактора отходов в строительных оценках. |

---

## 4. Ссылки из поиска (10)

| № | Название / заголовок | URL | Описание |
|---|------------------------|-----|----------|
| 1 | Flooring Calculator (MeasureSquare) | https://calculator.measuresquare.com/flooring | Калькулятор для всех типов покрытий, метрика/имперские, отходы, раскладка, PDF-сметы. |
| 2 | Flooring Cost Calculator (ActiveCalculator) | https://activecalculator.com/calculators/everyday/flooring-cost-calculator | Площадь × коэффициент отходов × цена за кв.фут; несколько комнат. |
| 3 | Flooring Calculator (InchCalculator) | https://www.inchcalculator.com/flooring-calculator | Размеры комнаты, отходы (%), цена за кв.фут; результат в кв.футах/ярдах/метрах. |
| 4 | Калькулятор напольных покрытий (MiniWebTool) | https://miniwebtool.com/ru/калькулятор-напольного-покрытия/ | Универсальный калькулятор площади и расхода на русском. |
| 5 | Калькулятор ламината (calc.by) | https://calc.by/building-calculators/laminate.html | Размеры комнаты и доски (мм), укладка 1/2, 1/3, диагональ; схема укладки. |
| 6 | Расчёт количества напольного покрытия (sdelalremont) | https://sdelalremont.ru/raschet-kolichestva-napolnogo-pokrytiya.html | Ламинат, плитка, линолеум: выбор типа, размеры, запас 5–20%. |
| 7 | Калькулятор плитки + схема укладки (7x6.ru) | https://7x6.ru/calculators_construction_floor_tiles | Плитка/керамогранит: штуки, упаковки, м²; чертёж укладки, швы, отходы. |
| 8 | Flooring Waste Calculator (Calculator Academy) | https://calculator.academy/flooring-waste-calculator/ | Формула отходов: FW = (TA × WR) / 100; примеры. |
| 9 | Flooring Cost Estimator (Lowe's) | https://lowes.com/l/install/flooring-project-cost-estimator | Калькулятор стоимости проекта укладки пола (материал + работа). |
| 10 | Flooring Cost Estimator (Costimates) | https://www.costimates.com/calculators/flooring-cost-estimator/ | Оценка стоимости нового/замены пола: тип, качество, демонтаж. |

---

## 5. Выводы

- **Документация:** MeasureSquare даёт готовый калькулятор и API для встраивания; для собственной реализации достаточно формул площади, отходов и стоимости (см. раздел 6).
- **Рекомендуемые источники для реализации:** репозитории AnthonyJRay/materials-calculator и SouravHere/Veggie-Smart (логика + 3D при желании); статьи HandyCalcs и Lindvor/Megapoliya — про проценты отходов и расчёт ламината; Pluralsight/Dev.to — про форму и состояние калькулятора на React.
- **Ограничения:** многие коммерческие калькуляторы (MeasureSquare) требуют API key; в отчёте упор на открытые репозитории и публичные формулы.

---

## 6. Как реализовать в проекте floor-haven

### Контекст проекта

- **Стек:** Vite 5, TypeScript, React 18, React Router DOM 6, Tailwind CSS, shadcn/ui (Radix), Lucide React.
- **Данные:** `src/data/products.ts` — типы `Product`, `ProductCategory`; категории: Ламинат, Паркетная доска, Виниловый пол, Кварц-винил, Инженерная доска, Пробковое покрытие; у товара есть `price` (руб/м²), `thickness`, `category`.
- **Структура:** страницы в `src/pages/`, компоненты в `src/components/`, стили из `index.css` (btn-primary, card-elevated, input-field и т.д.), UI на русском.

### Цель

Добавить **калькулятор укладки**: ввод площади (или длина × ширина), выбор типа покрытия / конкретного товара, процент отходов → **расход в м² и упаковках**, **стоимость материалов** в рублях.

### Формулы

1. **Площадь комнаты (м²):** `S = length * width` (при необходимости — сумма нескольких прямоугольников).
2. **Расход с отходами:** `material_m2 = S * (1 + waste_percent / 100)`.  
   Рекомендуемые отходы: прямой 7–10%, диагональ 12–15%, ёлочка/сложная форма 15–20% (по HandyCalcs, Lindvor).
3. **Количество упаковок:** если в каталоге задана площадь одной упаковки (м²) — `packs = ceil(material_m2 / area_per_pack)`. Иначе можно показывать только `material_m2` и цену за м².
4. **Стоимость:** `cost = material_m2 * price_per_m2`, где `price_per_m2` берётся из `Product.price`.

### Шаги реализации

1. **Данные**
   - В `Product` или в отдельном справочнике при необходимости добавить площадь одной упаковки (м²) и/или размеры доски (мм) для расчёта штук/упаковок по аналогии с calc.by.
   - Справочник процентов отходов по типу укладки (прямая, диагональ, ёлочка) — константа или конфиг в `src/data/`.

2. **Страница калькулятора**
   - Новая страница, например `src/pages/FloorCalculator.tsx` (или «Калькулятор» в меню).
   - Роут в роутере: `/calculator` или `/kalkulyator`.

3. **Форма (соответствие правилам проекта)**
   - Поля: длина и ширина комнаты (м); тип укладки (прямая / диагональ / ёлочка) или процент отходов вручную; выбор категории или конкретного товара из каталога (подтянуть список из `products.ts`).
   - Использовать компоненты shadcn/ui (Input, Select, Label, Card), классы из `index.css` (input-field, btn-primary, card-elevated). Подписи и плейсхолдеры — на русском.

4. **Расчёт и отображение**
   - При изменении полей пересчитывать: площадь, расход (м²), число упаковок (если есть данные), стоимость (руб).
   - Вывод: блок с результатами (м², упаковки, сумма); при выборе товара — название, цена за м², итог. Опционально — краткая подсказка по проценту отходов в зависимости от выбранного типа укладки.

5. **Интеграция с каталогом**
   - Из калькулятора: ссылка «Подобрать в каталоге» → `/catalog` с предустановленным фильтром по категории (если поддерживается в Catalog).
   - В карточке товара в каталоге: кнопка «Рассчитать расход» → переход на калькулятор с предзаполненным товаром/категорией (через state или query-параметры).

6. **Дополнительно (по желанию)**
   - Несколько комнат: список комнат (длина × ширина) с суммой площади.
   - Сохранение расчёта в localStorage или печать/экспорт в PDF (позже).
   - Если нужен готовый виджет вместо своей реализации — рассмотреть встраивание MeasureSquare (см. раздел 1) по их интеграции; для полного контроля и соответствия дизайну floor-haven предпочтительна своя страница на React.

### Рекомендуемый порядок работ

1. Добавить в данные поле «площадь упаковки» (или размеры доски) для нескольких товаров.  
2. Реализовать страницу с формой и расчётом по формулам выше.  
3. Подключить выбор товара из `products` и вывод итога.  
4. Добавить ссылки каталог ↔ калькулятор.  
5. При необходимости расширить: несколько комнат, типы укладки из справочника.

После реализации калькулятор будет давать расход материалов и расчёт стоимости в рублях в едином стиле с проектом floor-haven.
